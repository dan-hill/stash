 <nz-layout>
   <app-instances-header >
     <app-stash-button
       size="small"
       icon="plus"
       content="add instance"
       (onClick)="createModal(tplTitle, tplContent, createInstanceFooterTemplate, null)" />
   </app-instances-header>
  <nz-table class="attribute-table" #instanceTable [nzData]="instances" [nzSize]="'small'">
    <thead>
    <tr>
      <th>Name</th>
      <th nzWidth="250px">Container</th>
      <th nzWidth="30px" >Quantity</th>
      <th nzWidth="30px" >Minimum</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let instance of instanceTable.data" class="editable-row">
      <td>
        <a nz-button [nzSize]="'small'" nzType="link" (click)="createModal(tplTitle, tplContent, tplFooter, instance)">{{ instance.name }}</a>
      </td>
      <td>
        {{ instance.instance?.name }}
      </td>
      <td>
        {{ instance.quantity }}
      </td>
      <td>
        {{ instance.minimum_quantity }}
      </td>
    </tr>
    </tbody>
  </nz-table>
</nz-layout>


 <ng-template #tplTitle>{{modalTitle}}</ng-template>

 <ng-template #tplContent let-params>

   <form nz-form [formGroup]="createOrUpdateInstanceForm">
     <nz-form-item>
       <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="name">Instance Name</nz-form-label>
       <nz-form-control>
         <input
           nz-input
           formControlName="name"
           type="text" />
       </nz-form-control>
     </nz-form-item>
     <nz-form-item>
       <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="targetThing">Container</nz-form-label>
       <nz-form-control>
         <nz-cascader formControlName="instance"
                      [nzOptions]="nzOptions"
                      [nzShowSearch]="true"
                      (nzSelect)="onChanges($event)">
         </nz-cascader>
       </nz-form-control>
     </nz-form-item>
     <nz-form-item>
       <nz-form-label [nzSm]="6" [nzXs]="24" >Quantity</nz-form-label>
       <nz-form-control>
         <nz-input-number formControlName="quantity"
                          [nzMin]="1"
                          [nzMax]="10"
                          [nzStep]="1">
         </nz-input-number>
       </nz-form-control>
     </nz-form-item>
     <nz-form-item>
       <nz-form-label [nzSm]="6" [nzXs]="24" >Minimum Quantity</nz-form-label>
       <nz-form-control>
         <nz-input-number formControlName="minimum_quantity"
                          [nzMin]="1"
                          [nzMax]="10"
                          [nzStep]="1">
         </nz-input-number>
       </nz-form-control>
     </nz-form-item>
     <nz-form-item>
       <nz-form-label [nzSm]="6" [nzXs]="24" >Transferable</nz-form-label>
       <nz-form-control>
         <nz-switch formControlName="transferable"></nz-switch>
       </nz-form-control>
     </nz-form-item>
   </form>



 </ng-template>

 <ng-template #tplFooter let-ref="modalRef">
   <app-stash-button
     style="float: left"
     icon="delete"
     nz-popconfirm
     nzPopconfirmTitle="Sure to delete?"
     (nzOnConfirm)="deleteInstance(ref)"
     [loading] = "tplModalButtonLoading"/>
   <app-stash-button
     content="cancel"
     (onClick)="destroyTplModal(ref)"/>
   <app-stash-button
     icon="save"
     content="save"
     [loading] = "tplModalButtonLoading"
     (onClick)="updateInstance(ref)"/>
 </ng-template>

 <ng-template #createInstanceFooterTemplate let-ref="modalRef">
   <app-stash-button
     content="cancel"
     (onClick)="destroyTplModal(ref)"/>
   <app-stash-button
     icon="save"
     content="save"
     [loading] = "tplModalButtonLoading"
     (onClick)="createInstance(ref)"/>
 </ng-template>
